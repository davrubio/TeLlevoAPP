<app-header titlePage="{{titlePage}}"> </app-header>

<ion-content class="ion-padding" [fullscreen]="true">
  <h1 class="ion-padding">Datos Personales:</h1>
  <ion-list class="item">
    <ion-item>
      <ion-label>Nombre: {{userData.userInfo?.nombre}}</ion-label>
    </ion-item>
    <ion-item *ngIf="!element">
      <ion-label>Carrera: {{userData.userInfo?.carreraUniv}}</ion-label>
      <ion-icon name="school"></ion-icon>
    </ion-item>
    <ion-item *ngIf="element">
      <ion-select (ionChange)="schoolSelected($event)" label="Escuela: " placeholder="Seleccione su escuela">
        <ion-select-option [value]="school" *ngFor="let school of schools" > {{ school.escuela }}</ion-select-option>
      </ion-select>
    </ion-item>
    <ion-item *ngIf="isEnableCareer()">
      <ion-select (ionChange)="careerSelected($event)" label="Carrera: " placeholder="Seleccione su Carrera">
        <ion-select-option [value]="career" *ngFor="let career of listCareersTmp" > {{ career }}</ion-select-option>
      </ion-select>
    </ion-item>
  </ion-list>

  <div *ngIf="userData.userInfo?.roles?.includes('driver')">
    <h1 class="ion-padding">Datos del vehiculo registrado:</h1>
    <ion-list class="item">
      <ng-template *ngIf="userData.userInfo?.vehiculo != null; else elseValidCar">
        <ion-item>
          <ion-label>Patente: {{userData.userInfo?.vehiculo?.patente}}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>Modelo: {{userData.userInfo?.vehiculo?.modelo}}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>Marca: {{userData.userInfo?.vehiculo?.marca}}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>A침o Vehiculo: {{userData.userInfo?.vehiculo?.annoVehiculo}}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>Permiso Circulaci칩n: {{userData.userInfo?.vehiculo?.permisoCirculacion}}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>Asientos: {{userData.userInfo?.vehiculo?.asientos}}</ion-label>
        </ion-item>
        <ion-item>
          <ion-label>Color: {{userData.userInfo?.vehiculo?.color}}</ion-label>
        </ion-item>
      </ng-template>

      <ng-template #elseValidCar>
        <ion-item>
          <ion-label>No hay un vehiculo registrado</ion-label>
        </ion-item>
      </ng-template>
    </ion-list>
  </div>

  <h1 class="ion-padding">Datos de la cuenta:</h1>
  <ion-list class="item">
    <ion-item>
      <ion-label>Email: {{userData.email}}</ion-label>
      <ion-icon slot="end" name="mail"></ion-icon>
    </ion-item>
    <ion-item *ngIf="userData.userInfo != undefined && userData.userInfo?.emailVerificado" class="ion-no-margin">
        <ion-label>Estado Email: Verificado</ion-label>
        <ion-icon slot="end" name="checkmark-circle"></ion-icon>
    </ion-item>
    <ion-item *ngIf="userData.userInfo != undefined && !userData.userInfo?.emailVerificado">
      <ion-label>Email Verificado: No Verificado</ion-label>
      <ion-icon slot="end" name="close-circle"></ion-icon>
    </ion-item>
    <ion-item>
      <ion-label>Roles: {{getRoles()}}</ion-label>
    </ion-item>
  </ion-list>

  <ion-button *ngIf="!isEditing()" expand="block" fill="clear" (click)="changeLabel()">
    <ion-icon slot="start" name="create"></ion-icon>
    Editar Informaci칩n
  </ion-button>
  <ion-button *ngIf="isEditing()" expand="block" fill="clear" (click)="saveUserInfo()">
    <ion-icon slot="start" name="save"></ion-icon>
    Guardar Informaci칩n
  </ion-button>
  <ion-button *ngIf="isEditing()" expand="block" fill="clear" (click)="changeLabel()">
    <ion-icon slot="start" name="close-circle"></ion-icon>
    Cancelar
  </ion-button>
</ion-content>
